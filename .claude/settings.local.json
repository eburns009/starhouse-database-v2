{
  "permissions": {
    "allow": [
      "Bash(git push:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfix(ui): Implement tokenized search for complex name variations\n\nRoot cause: UI query did not search across all name fields for each word\nin multi-word searches like \"Lynn Amber Ryan\".\n\nChanges:\n- starhouse-ui/components/contacts/ContactSearchResults.tsx\n  - Replaced word-count logic with tokenized search\n  - Now searches 8 fields: first_name, last_name, additional_name,\n    paypal_first_name, paypal_last_name, paypal_business_name, email, phone\n  - Each word in search query matches against ANY field\n  - Handles: multi-word names, couples, business names split across fields\n\nTesting: Verified \"Lynn Amber Ryan\" now finds Lynn (lynn in first_name,\namber in email, ryan in last_name).\n\nFixes:\n- \"Lynn Amber Ryan\" â†’ âœ… Finds Lynn Ryan\n- \"Sue Johnson\" â†’ âœ… Finds \"Sue Johnson and Mike Moritz\"\n- \"Mike Moritz\" â†’ âœ… Finds same couple contact\n- Business names split across fields â†’ âœ… Found\n\nImplementation: Phase 1 from NAME_SEARCH_BEST_PRACTICES.md\n(Tokenized search - no database changes needed)\n\nðŸ¤– Generated with Claude Code (https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(python3:*)",
      "Bash(npx tsc:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(env)",
      "Bash(npm run build:*)",
      "Bash(tee:*)",
      "Bash(cat:*)",
      "Bash(vercel:*)",
      "Bash(source:*)",
      "Bash(set -a)",
      "Bash(set +a)",
      "WebSearch",
      "Bash(head:*)",
      "Bash(wc:*)",
      "Bash(echo:*)",
      "Bash(psql:*)",
      "Bash(ls:*)",
      "Bash(npm run type-check:*)",
      "Bash(chmod:*)",
      "Bash(find:*)",
      "Bash(if [ -n \"$DATABASE_URL\" ])",
      "Bash(then echo \"DATABASE_URL is set\")",
      "Bash(else echo \"DATABASE_URL is NOT set\")",
      "Bash(fi)",
      "Bash(export:*)",
      "Bash(DATABASE_URL='postgresql://postgres.lnagadkqejnopgfxwlkb:gqelzN6LRew4Cy9H@aws-1-us-east-2.pooler.supabase.com:5432/postgres' psql:*)",
      "Bash(git config:*)",
      "Bash(command -v:*)",
      "Bash(git lfs:*)",
      "Bash(test:*)",
      "mcp__ide__getDiagnostics",
      "Bash(code --status:*)",
      "Bash(if [ -f .env ])",
      "Bash(then set -a)",
      "Bash(/tmp/mailing_list_high_confidence.csv)",
      "Bash(else echo \".env not found\")",
      "Bash(then echo \"DATABASE_URL is now set\")",
      "Bash(else echo \"DATABASE_URL still not set\")",
      "Bash(/tmp/db_contacts_dec3.txt)",
      "Bash(/tmp/diagnostic_last_24hrs.sh:*)",
      "Bash(DATABASE_URL='postgresql://postgres.lnagadkqejnopgfxwlkb:gqelzN6LRew4Cy9H@aws-1-us-east-2.pooler.supabase.com:5432/postgres' psql -c \"\\d contacts\")",
      "Bash(if [ -n \"$SMARTY_AUTH_ID\" ])",
      "Bash([ -n \"$SMARTY_AUTH_TOKEN\" ])",
      "Bash(then echo \"SmartyStreets credentials are set\")",
      "Bash(else echo \"SmartyStreets credentials NOT set\")",
      "Bash(SMARTY_AUTH_ID='cc41645b-b75f-929f-d078-9c8a7f49d9e9' SMARTY_AUTH_TOKEN='qTEN4N20MxrTAokl0oNn' python3:*)",
      "Bash(DATABASE_URL='postgresql://postgres.lnagadkqejnopgfxwlkb:gqelzN6LRew4Cy9H@aws-1-us-east-2.pooler.supabase.com:5432/postgres' psql -c \"\\d tags\")",
      "WebFetch(domain:truencoa.com)",
      "Bash(DATABASE_URL='postgresql://postgres.lnagadkqejnopgfxwlkb:gqelzN6LRew4Cy9H@aws-1-us-east-2.pooler.supabase.com:5432/postgres' python3:*)",
      "Bash(DATABASE_URL='postgresql://postgres.lnagadkqejnopgfxwlkb:gqelzN6LRew4Cy9H@aws-1-us-east-2.pooler.supabase.com:5432/postgres' psql -c \"SELECT COUNT(*) as enriched_contacts FROM contacts WHERE total_spent > 0 AND source_system != ''quickbooks_donor'';\")",
      "WebFetch(domain:postalpro.usps.com)",
      "Bash(then echo \"âœ… SmartyStreets credentials are set\")",
      "Bash(else echo \"âŒ SmartyStreets credentials NOT set\")",
      "WebFetch(domain:app.truencoa.com)",
      "Bash(DATABASE_URL='postgresql://postgres.lnagadkqejnopgfxwlkb:gqelzN6LRew4Cy9H@aws-1-us-east-2.pooler.supabase.com:5432/postgres' psql -c \"SELECT column_name, data_type FROM information_schema.columns WHERE table_name = ''contacts'' AND column_name IN (''ncoa_move_date'', ''ncoa_new_address'', ''address_validated'', ''usps_dpv_confirmation'', ''address_quality_score'');\")",
      "Bash(supabase db push:*)",
      "Bash(PGPASSWORD='gqelzN6LRew4Cy9H' psql:*)",
      "Bash(supabase gen types:*)",
      "Bash(starhouse-ui/lib/types/database.types.ts)",
      "Bash(xargs:*)",
      "Bash(./scripts/cleanup_workspace.sh:*)",
      "Bash(for migration in 20251101000000_add_transaction_source_system.sql 20251101000001_proper_transaction_provenance.sql 20251102000001_contact_module_schema.sql 20251102000002_contact_module_views.sql 20251102000003_contact_module_functions.sql 20251102000004_contact_module_migration.sql 20251102000005_fix_function_types.sql)",
      "Bash(do echo \"Applying $migration...\" PGPASSWORD='gqelzN6LRew4Cy9H' psql -h aws-1-us-east-2.pooler.supabase.com -p 5432 -U postgres.lnagadkqejnopgfxwlkb -d postgres -f \"$migration\")",
      "Bash(DATABASE_URL='postgresql://postgres.lnagadkqejnopgfxwlkb:gqelzN6LRew4Cy9H@aws-1-us-east-2.pooler.supabase.com:5432/postgres' psql -c \"\nSELECT \n  COUNT(*) as total_contacts,\n  COUNT(CASE WHEN address_line_1 IS NOT NULL AND city IS NOT NULL AND state IS NOT NULL AND postal_code IS NOT NULL THEN 1 END) as billing_complete,\n  COUNT(CASE WHEN shipping_address_line_1 IS NOT NULL AND shipping_city IS NOT NULL AND shipping_state IS NOT NULL AND shipping_postal_code IS NOT NULL THEN 1 END) as shipping_complete,\n  COUNT(CASE WHEN ncoa_move_date IS NOT NULL THEN 1 END) as ncoa_tracked_moves,\n  COUNT(CASE WHEN billing_usps_validated_at IS NOT NULL THEN 1 END) as usps_validated_billing,\n  COUNT(CASE WHEN shipping_usps_validated_at IS NOT NULL THEN 1 END) as usps_validated_shipping\nFROM contacts;\n\")",
      "Bash(/tmp/backup_calculate_address_score_20251115.sql)",
      "Bash(/tmp/test_results_BEFORE.txt)",
      "Bash(/tmp/test_results_AFTER.txt)",
      "Bash(node --version:*)",
      "Bash(npm --version:*)",
      "Bash(code --list-extensions:*)",
      "Bash(DATABASE_URL='postgresql://postgres.lnagadkqejnopgfxwlkb:gqelzN6LRew4Cy9H@aws-1-us-east-2.pooler.supabase.com:5432/postgres' psql -c \"SELECT version, name FROM supabase_migrations.schema_migrations ORDER BY version DESC LIMIT 15;\")",
      "Bash(npx supabase:*)",
      "Bash(lib/types/database.types.ts)",
      "Bash(PGPASSWORD='gqelzN6LRew4Cy9H' psql -h aws-1-us-east-2.pooler.supabase.com -p 5432 -U postgres.lnagadkqejnopgfxwlkb -d postgres -c \"\n-- Chris Loving-Campos: Count transactions after Nov 16, 2024\nSELECT \n  ''Chris Loving-Campos'' as customer,\n  ''Nov 16, 2024'' as claimed_cancellation,\n  COUNT(*) as transactions_after_cancellation,\n  SUM(amount) as total_charged,\n  MIN(transaction_date) as first_charge_after,\n  MAX(transaction_date) as last_charge\nFROM contacts c\nJOIN transactions t ON c.id = t.contact_id\nWHERE c.email = ''chris@inspire.graphics''\n  AND t.transaction_date > ''2024-11-16''\n  AND t.source_system IN (''kajabi'', ''paypal'')\n  AND t.transaction_type = ''subscription'';\n\")",
      "Bash(PGPASSWORD='gqelzN6LRew4Cy9H' psql -h aws-1-us-east-2.pooler.supabase.com -p 5432 -U postgres.lnagadkqejnopgfxwlkb -d postgres -c \"\n-- Data Consistency Check 3: Subscriptions with start_date AFTER first transaction\nSELECT COUNT(*) as subscriptions_starting_after_first_payment\nFROM subscriptions s\nJOIN LATERAL (\n  SELECT MIN(transaction_date) as first_transaction\n  FROM transactions t\n  WHERE t.subscription_id = s.id AND t.deleted_at IS NULL\n) t ON true\nWHERE s.start_date > t.first_transaction\n  AND s.deleted_at IS NULL;\n\")",
      "Bash(top:*)",
      "Bash(journalctl:*)"
    ],
    "deny": [],
    "ask": []
  }
}
